<h1 class="mb-4 text-xl font-semibold text-slate-900">Users</h1>

<p *ngIf="usersStore.loading()" class="text-sm text-slate-500">Loading...</p>

<p *ngIf="usersStore.error()" class="mb-3 rounded-xl bg-red-50 p-3 text-sm text-red-700">
    {{ usersStore.error() }}
</p>

<app-user-form [mode]="editingUser() ? 'edit' : 'create'" [initialValue]="editingUser()" (create)="createUser($event)"
    (update)="saveEdit($event)" (cancel)="cancelEdit()"></app-user-form>

<hr class="my-4" />

<ul class="space-y-2">
    <li *ngFor="let u of usersStore.users(); trackBy: trackId"
        class="flex items-center justify-between rounded-xl border p-3">
        <div>
            <div class="font-medium text-slate-900">{{ u.name }}</div>
            <div class="text-sm text-slate-500">{{ u.email }}</div>
        </div>

        <div class="flex items-center gap-2">
            <button type="button" (click)="startEdit(u)" class="rounded-xl border px-3 py-2 text-sm hover:bg-slate-50">
                Edit
            </button>
            <button type="button" (click)="delete(u.id)"
                class="rounded-xl bg-red-600 px-3 py-2 text-sm font-medium text-white hover:bg-red-500">
                Delete
            </button>
        </div>
    </li>
</ul>